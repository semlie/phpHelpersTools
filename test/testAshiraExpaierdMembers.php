<?php

/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

require_once '../wishList/ashiraDeleteExpairdSubscribtion.php';

class testAshiraDeleteExpairdSubscribtion extends PHPUnit_Framework_TestCase {

    public function testFindUserIdFromList() {
        $wl = new \wishlist\ashiraDeleteExpairdSubscribtion();
        $u = $wl->getUserIdByMail("a@a.com");
        print_r($u);
        $this->assertTrue(5957 == $u);
    }

    public function testMapListUsers() {
        $json = '[{"id":"9","lastName":"\\u05e9\\u05de\\u05d5\\u05d0\\u05dcfdfdfd","username":"sasa","address":"dsdsdsds","city":"\\u05d1\\u05e0\\u05d9 \\u05d1\\u05e8\\u05e7","country":"\\u05d9\\u05e9\\u05e8\\u05d0\\u05dc","phone":"\\u05dc\\u05d9\\u05d1\\u05e1\\u05e7","email":"ashira.shiran@gmail.com","sub":"{\\"sub10\\":\\"\\",\\"sub30\\":\\"Fri, 29 Jan 2016 20:05:42 GMT\\",\\"sub34\\":\\"\\",\\"sub40\\":\\"\\",\\"sub44\\":\\"\\",\\"sub50\\":\\"Thu, 09 Jun 2016 22:23:11 GMT\\",\\"sub54\\":\\"Mon, 09 Mar 2015 22:22:57 GMT\\"}"},{"id":"10","lastName":"\\u05e8\\u05d5\\u05e0\\u05d9 \\u05d0\\u05d9\\u05dc\\u05d5\\u05df","username":"","address":"\\u05d4\\u05e8\\u05e6\\u05d5\\u05d2","city":"\\u05d1\\u05e0\\u05d9 \\u05d1\\u05e8\\u05e7","country":"\\u05d9\\u05e9\\u05e8\\u05d0\\u05dc","phone":"05022555522","email":"roni.aylon@gmail.com","sub":"{\\"sub30\\":\\"Thu, 29 Jan 2015 20:21:43 GMT\\",\\"sub40\\":\\"Wed, 29 Oct 2014 20:28:44 GMT\\",\\"sub50\\":\\"\\"}"},{"id":"11","lastName":"\\u05e9\\u05de\\u05d5\\u05dc\\u05d9\\u05e7","username":"asasas","address":"\\u05d4\\u05e8\\u05e6\\u05d5\\u05d2","city":"\\u05d1\\u05e0\\u05d9 \\u05d1\\u05e8\\u05e7","country":"\\u05d9\\u05e9\\u05e8\\u05d0\\u05dc","phone":"5454545454","email":"a@a.com","sub":"{\\"sub10\\":\\"\\",\\"sub30\\":\\"Thu, 29 Jan 2015 20:56:37 GMT\\",\\"sub34\\":\\"\\",\\"sub40\\":\\"Tue, 09 Dec 2014 23:17:20 GMT\\",\\"sub44\\":\\"\\",\\"sub50\\":\\"Mon, 09 Mar 2015 09:12:31 GMT\\",\\"sub54\\":\\"Tue, 09 Jun 2015 08:14:31 GMT\\"}"},{"id":"13","lastName":"\\u05d0\\u05e0\\u05d4\\u05d9\\u05ea \\u05e9\\u05e4\\u05d9\\u05d2\\u05dc-\\u05d4\\u05e8\\u05e1\\u05d5\\u05df","username":"anahit.herson","address":"\\u05e9\\u05d6\\"\\u05e8 15\\\\25 \\u05ea\\u05dc \\u05db\\u05d1\\u05d9\\u05e8","city":"\\u05ea\\u05dc-\\u05d0\\u05d1\\u05d9\\u05d1","country":"\\u05d9\\u05e9\\u05e8\\u05d0\\u05dc","phone":"525462955","email":"anahit.herson@gmail.com","sub":"{\\"sub10\\":\\"\\",\\"sub30\\":\\"Wed, 03 Dec 2014 08:39:15 GMT\\",\\"sub34\\":\\"\\",\\"sub40\\":\\"\\",\\"sub44\\":\\"\\",\\"sub50\\":\\"\\",\\"sub54\\":\\"\\"}"},{"id":"15","lastName":"\\u05d7\\u05df \\u05e4\\u05d9\\u05e9\\u05de\\u05df","username":"036193542","address":"\\u05d0\\u05d3\\u05dd \\u05d4\\u05db\\u05d4\\u05df 7","city":"\\u05d7\\u05d9\\u05e4\\u05d4","country":"\\u05d9\\u05e9\\u05e8\\u05d0\\u05dc","phone":"524582806","email":"chen6193@gmail.com","sub":"{\\"sub30\\":\\"Wed, 05 Nov 2014 14:43:15 GMT\\",\\"sub34\\":null,\\"sub40\\":null,\\"sub44\\":null,\\"sub54\\":null,\\"sub50\\":null}"},{"id":"16","lastName":"\\u05e0\\u05d2\\u05d4 \\u05d1\\u05df \\u05d7\\u05d5\\u05e8\\u05d9\\u05df","username":"herutb2","address":"\\u05de\\u05d5\\u05e9\\u05d1 \\u05e0\\u05d5\\u05d1","city":"\\u05e8\\u05de\\u05ea \\u05d4\\u05d2\\u05d5\\u05dc\\u05df","country":"\\u05d9\\u05e9\\u05e8\\u05d0\\u05dc","phone":"0525489594","email":"herutb2@walla.com","sub":"{\\"sub10\\":\\"\\",\\"sub30\\":\\"\\",\\"sub34\\":\\"Mon, 23 Mar 2015 07:56:32 GMT\\",\\"sub40\\":\\"Wed, 11 Feb 2015 17:50:03 GMT\\",\\"sub44\\":\\"\\",\\"sub50\\":\\"\\",\\"sub54\\":\\"\\"}"},{"id":"19","lastName":"Samara Hendrickson","username":"SamboH","address":"\\u05d3\\u05d1\\u05e9 205\\/1 \\u05d2\\u05d9\\u05dc\\u05d4","city":"\\u05d9\\u05e8\\u05d5\\u05e9\\u05dc\\u05d9\\u05dd","country":"\\u05d9\\u05e9\\u05e8\\u05d0\\u05dc","phone":"506798834","email":"samaara@gmail.com","sub":"{\\"sub30\\":\\"Mon, 01 Dec 2014 11:58:35 GMT\\",\\"sub34\\":null,\\"sub40\\":null,\\"sub44\\":null,\\"sub54\\":null,\\"sub50\\":null}"},{"id":"20","lastName":"\\u05ea\\u05d7\\u05d9\\u05d4 \\u05e9\\u05e4\\u05d9\\u05e8\\u05d0","username":"tchiyas19","address":"\\u05d1\\u05df \\u05d9\\u05d4\\u05d5\\u05d3\\u05d4 132","city":"\\u05d1\\u05d9\\u05ea \\u05d0\\u05dc","country":"\\u05d9\\u05e9\\u05e8\\u05d0\\u05dc","phone":"0528224994","email":"tchiyas19@gmail.com","sub":"{\\"sub10\\":\\"Sun, 30 Nov 2014 22:39:30 GMT\\",\\"sub30\\":\\"Mon, 01 Dec 2014 09:51:29 GMT\\",\\"sub34\\":\\"\\",\\"sub40\\":\\"\\",\\"sub44\\":\\"\\",\\"sub50\\":\\"\\",\\"sub54\\":\\"\\"}"},{"id":"26","lastName":"\\u05e8\\u05d1\\u05e7\\u05d4 \\u05d8\\u05dc","username":"avriktal","address":"\\u05d3.\\u05e0. \\u05e8\\u05de\\u05ea \\u05d4\\u05d2\\u05d5\\u05dc\\u05df 12915","city":"\\u05de\\u05d5\\u05e9\\u05d1 \\u05e0\\u05d8\\u05d5\\u05e8","country":"\\u05d9\\u05e9\\u05e8\\u05d0\\u05dc","phone":"522800231","email":"avriktal@gmail.com","sub":"{\\"sub10\\":\\"\\",\\"sub30\\":\\"Thu, 03 Sep 2015 07:22:38 GMT\\",\\"sub34\\":\\"\\",\\"sub40\\":\\"Wed, 17 Dec 2014 09:22:44 GMT\\",\\"sub44\\":\\"\\",\\"sub50\\":\\"\\",\\"sub54\\":\\"\\"}"},{"id":"29","lastName":"\\u05e2\\u05e0\\u05ea \\u05d9\\u05e9\\u05e8\\u05d0\\u05dc","username":"anat","address":"\\u05d4\\u05d0\\u05d8\\u05d3 5, \\u05d0\\u05dc\\u05d9\\u05d0\\u05d1, \\u05d3.\\u05e0. \\u05dc\\u05db\\u05d9\\u05e9","city":"\\u05d0\\u05dc\\u05d9\\u05d0\\u05d1","country":"\\u05d9\\u05e9\\u05e8\\u05d0\\u05dc","phone":"052-3311131","email":"anat.israel@gmail.com","sub":"{\\"sub10\\":\\"Invalid Date\\",\\"sub30\\":\\"Tue, 31 Mar 2015 12:13:01 GMT\\",\\"sub34\\":\\"\\",\\"sub40\\":\\"Sat, 28 Feb 2015 08:08:45 GMT\\",\\"sub44\\":\\"\\",\\"sub50\\":\\"\\",\\"sub54\\":\\"\\"}"}]';
        $result = json_decode($json, true);
        $wl = new \wishlist\ashiraDeleteExpairdSubscribtion();
        $u = $wl->mapUsers($result);
        //  print_r($u);
        $this->assertTrue(false);
    }

    public function testRemoveExpirdSub() {
        $wl = new \wishlist\ashiraDeleteExpairdSubscribtion();
        $json = file_get_contents('https://www.shammaim.info/reg/php/d/get_expired_users.php');

        //$json = '[{"id":"9","lastName":"\\u05e9\\u05de\\u05d5\\u05d0\\u05dcfdfdfd","username":"sasa","address":"dsdsdsds","city":"\\u05d1\\u05e0\\u05d9 \\u05d1\\u05e8\\u05e7","country":"\\u05d9\\u05e9\\u05e8\\u05d0\\u05dc","phone":"\\u05dc\\u05d9\\u05d1\\u05e1\\u05e7","email":"ashira.shiran@gmail.com","sub":"{\\"sub10\\":\\"\\",\\"sub30\\":\\"Fri, 29 Jan 2016 20:05:42 GMT\\",\\"sub34\\":\\"\\",\\"sub40\\":\\"\\",\\"sub44\\":\\"\\",\\"sub50\\":\\"Thu, 09 Jun 2016 22:23:11 GMT\\",\\"sub54\\":\\"Mon, 09 Mar 2015 22:22:57 GMT\\"}"},{"id":"10","lastName":"\\u05e8\\u05d5\\u05e0\\u05d9 \\u05d0\\u05d9\\u05dc\\u05d5\\u05df","username":"","address":"\\u05d4\\u05e8\\u05e6\\u05d5\\u05d2","city":"\\u05d1\\u05e0\\u05d9 \\u05d1\\u05e8\\u05e7","country":"\\u05d9\\u05e9\\u05e8\\u05d0\\u05dc","phone":"05022555522","email":"roni.aylon@gmail.com","sub":"{\\"sub30\\":\\"Thu, 29 Jan 2015 20:21:43 GMT\\",\\"sub40\\":\\"Wed, 29 Oct 2014 20:28:44 GMT\\",\\"sub50\\":\\"\\"}"},{"id":"11","lastName":"\\u05e9\\u05de\\u05d5\\u05dc\\u05d9\\u05e7","username":"asasas","address":"\\u05d4\\u05e8\\u05e6\\u05d5\\u05d2","city":"\\u05d1\\u05e0\\u05d9 \\u05d1\\u05e8\\u05e7","country":"\\u05d9\\u05e9\\u05e8\\u05d0\\u05dc","phone":"5454545454","email":"a@a.com","sub":"{\\"sub10\\":\\"\\",\\"sub30\\":\\"Thu, 29 Jan 2015 20:56:37 GMT\\",\\"sub34\\":\\"\\",\\"sub40\\":\\"Tue, 09 Dec 2014 23:17:20 GMT\\",\\"sub44\\":\\"\\",\\"sub50\\":\\"Mon, 09 Mar 2015 09:12:31 GMT\\",\\"sub54\\":\\"Tue, 09 Jun 2015 08:14:31 GMT\\"}"},{"id":"13","lastName":"\\u05d0\\u05e0\\u05d4\\u05d9\\u05ea \\u05e9\\u05e4\\u05d9\\u05d2\\u05dc-\\u05d4\\u05e8\\u05e1\\u05d5\\u05df","username":"anahit.herson","address":"\\u05e9\\u05d6\\"\\u05e8 15\\\\25 \\u05ea\\u05dc \\u05db\\u05d1\\u05d9\\u05e8","city":"\\u05ea\\u05dc-\\u05d0\\u05d1\\u05d9\\u05d1","country":"\\u05d9\\u05e9\\u05e8\\u05d0\\u05dc","phone":"525462955","email":"anahit.herson@gmail.com","sub":"{\\"sub10\\":\\"\\",\\"sub30\\":\\"Wed, 03 Dec 2014 08:39:15 GMT\\",\\"sub34\\":\\"\\",\\"sub40\\":\\"\\",\\"sub44\\":\\"\\",\\"sub50\\":\\"\\",\\"sub54\\":\\"\\"}"},{"id":"15","lastName":"\\u05d7\\u05df \\u05e4\\u05d9\\u05e9\\u05de\\u05df","username":"036193542","address":"\\u05d0\\u05d3\\u05dd \\u05d4\\u05db\\u05d4\\u05df 7","city":"\\u05d7\\u05d9\\u05e4\\u05d4","country":"\\u05d9\\u05e9\\u05e8\\u05d0\\u05dc","phone":"524582806","email":"chen6193@gmail.com","sub":"{\\"sub30\\":\\"Wed, 05 Nov 2014 14:43:15 GMT\\",\\"sub34\\":null,\\"sub40\\":null,\\"sub44\\":null,\\"sub54\\":null,\\"sub50\\":null}"},{"id":"16","lastName":"\\u05e0\\u05d2\\u05d4 \\u05d1\\u05df \\u05d7\\u05d5\\u05e8\\u05d9\\u05df","username":"herutb2","address":"\\u05de\\u05d5\\u05e9\\u05d1 \\u05e0\\u05d5\\u05d1","city":"\\u05e8\\u05de\\u05ea \\u05d4\\u05d2\\u05d5\\u05dc\\u05df","country":"\\u05d9\\u05e9\\u05e8\\u05d0\\u05dc","phone":"0525489594","email":"herutb2@walla.com","sub":"{\\"sub10\\":\\"\\",\\"sub30\\":\\"\\",\\"sub34\\":\\"Mon, 23 Mar 2015 07:56:32 GMT\\",\\"sub40\\":\\"Wed, 11 Feb 2015 17:50:03 GMT\\",\\"sub44\\":\\"\\",\\"sub50\\":\\"\\",\\"sub54\\":\\"\\"}"},{"id":"19","lastName":"Samara Hendrickson","username":"SamboH","address":"\\u05d3\\u05d1\\u05e9 205\\/1 \\u05d2\\u05d9\\u05dc\\u05d4","city":"\\u05d9\\u05e8\\u05d5\\u05e9\\u05dc\\u05d9\\u05dd","country":"\\u05d9\\u05e9\\u05e8\\u05d0\\u05dc","phone":"506798834","email":"samaara@gmail.com","sub":"{\\"sub30\\":\\"Mon, 01 Dec 2014 11:58:35 GMT\\",\\"sub34\\":null,\\"sub40\\":null,\\"sub44\\":null,\\"sub54\\":null,\\"sub50\\":null}"},{"id":"20","lastName":"\\u05ea\\u05d7\\u05d9\\u05d4 \\u05e9\\u05e4\\u05d9\\u05e8\\u05d0","username":"tchiyas19","address":"\\u05d1\\u05df \\u05d9\\u05d4\\u05d5\\u05d3\\u05d4 132","city":"\\u05d1\\u05d9\\u05ea \\u05d0\\u05dc","country":"\\u05d9\\u05e9\\u05e8\\u05d0\\u05dc","phone":"0528224994","email":"tchiyas19@gmail.com","sub":"{\\"sub10\\":\\"Sun, 30 Nov 2014 22:39:30 GMT\\",\\"sub30\\":\\"Mon, 01 Dec 2014 09:51:29 GMT\\",\\"sub34\\":\\"\\",\\"sub40\\":\\"\\",\\"sub44\\":\\"\\",\\"sub50\\":\\"\\",\\"sub54\\":\\"\\"}"},{"id":"26","lastName":"\\u05e8\\u05d1\\u05e7\\u05d4 \\u05d8\\u05dc","username":"avriktal","address":"\\u05d3.\\u05e0. \\u05e8\\u05de\\u05ea \\u05d4\\u05d2\\u05d5\\u05dc\\u05df 12915","city":"\\u05de\\u05d5\\u05e9\\u05d1 \\u05e0\\u05d8\\u05d5\\u05e8","country":"\\u05d9\\u05e9\\u05e8\\u05d0\\u05dc","phone":"522800231","email":"avriktal@gmail.com","sub":"{\\"sub10\\":\\"\\",\\"sub30\\":\\"Thu, 03 Sep 2015 07:22:38 GMT\\",\\"sub34\\":\\"\\",\\"sub40\\":\\"Wed, 17 Dec 2014 09:22:44 GMT\\",\\"sub44\\":\\"\\",\\"sub50\\":\\"\\",\\"sub54\\":\\"\\"}"},{"id":"29","lastName":"\\u05e2\\u05e0\\u05ea \\u05d9\\u05e9\\u05e8\\u05d0\\u05dc","username":"anat","address":"\\u05d4\\u05d0\\u05d8\\u05d3 5, \\u05d0\\u05dc\\u05d9\\u05d0\\u05d1, \\u05d3.\\u05e0. \\u05dc\\u05db\\u05d9\\u05e9","city":"\\u05d0\\u05dc\\u05d9\\u05d0\\u05d1","country":"\\u05d9\\u05e9\\u05e8\\u05d0\\u05dc","phone":"052-3311131","email":"anat.israel@gmail.com","sub":"{\\"sub10\\":\\"Invalid Date\\",\\"sub30\\":\\"Tue, 31 Mar 2015 12:13:01 GMT\\",\\"sub34\\":\\"\\",\\"sub40\\":\\"Sat, 28 Feb 2015 08:08:45 GMT\\",\\"sub44\\":\\"\\",\\"sub50\\":\\"\\",\\"sub54\\":\\"\\"}"}]';
        $result = json_decode($json, true);
       // $result = array_slice($result, 100);

        $u = $wl->mapUsers($result);
        print_r(count($u));
        //$r = $wl->mapExierdDateLevels($u);

        $this->assertTrue(false);
    }

}
